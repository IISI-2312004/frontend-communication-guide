🖥️ 新專案開始時，前端的溝通準備 - 口頭講稿

【開場】
大家好，我是科服二組的Mandy，今天要跟大家分享的是「新專案開始時，前端的溝通準備」。

相信在座的各位前端技術都很厲害了，但是我想問一下，大家有沒有遇過這種情況：接到一個新專案，興沖沖地開始寫code，結果發現後端傳回來的日期格式跟你想的不一樣？或是有時候要包data，有時候不用包？

這就是我今天想要跟大家討論的問題。開發初期如果沒有共識，我們前端就會變成在「猜」資料格式，最後就是重工重工再重工。

【主體內容】

首先，我想跟大家談談為什麼要先對齊 API 格式。

其實前端和後端最大的溝通成本，不在技術本身，而在於我們對同一件事情的「理解不同」。

舉個例子，我們之前有個專案，後端的錯誤訊息完全沒有統一。有的回傳是這樣，有的回傳是那樣，導致我們前端每個API都要手動判斷是哪種錯誤格式。你們可以想像那個痛苦嗎？每個API都要寫不同的錯誤處理邏輯。

後來我們學聰明了，在開發前就先制定了一份API response規格表，後端統一格式之後，我們前端就可以用同一個Axios攔截器來統一處理所有的錯誤。這樣不但省時間，code也變得更乾淨。

接下來我想跟大家分享幾個具體需要注意的地方：

第一個是日期格式。

這個真的很重要，因為台灣的專案常常會遇到一個問題：到底要用民國年還是西元年？

如果是政府專案，通常會用民國年，像是"114/07/01"這樣的格式。但如果是一般企業專案，可能就會用西元年"2025/07/01"。

重點是，這件事情一定要在專案開始就決定好，不然你想想看，如果前端用西元年在處理，後端卻傳民國年過來，那畫面上就會顯示奇怪的日期，用戶看到一定會很困惑。

第二個是分頁資料格式。

這個也是很容易踩坑的地方。分頁的時候，我們通常需要知道現在在第幾頁、每頁幾筆、總共幾頁、總共幾筆資料，還有當頁的資料內容。

但是這裡有個常見的問題：page到底是從0開始還是從1開始？

你們有沒有遇過這種情況？前端分頁元件預設是從1開始，但後端傳回來的page卻是從0開始，結果分頁顯示就會錯亂。所以這個也是要事先確認的。

第三個是訊息處理。

這個我們真的踩過很多坑。比如說，訊息跳出來之後，是要自動消失還是要用戶手動關閉？需不需要副標題？

我記得我們之前做資安署的專案，一開始沒有規劃副標題欄位，結果後來需求變更要加副標題，但後端已經寫好了，沒辦法支援subMessage欄位，結果我們就要重新討論架構。

還有一個更經典的，我們前端會根據statusCode來判斷要顯示什麼樣的圖示，比如說200就顯示成功的綠色勾勾，500就顯示錯誤的紅色叉叉。但是有一次後端雖然回傳statusCode是500，卻沒有真的拋出HTTP 500錯誤，結果我們的錯誤攔截器就抓不到，整個錯誤處理就亂掉了。

所以這些細節真的都要事先討論清楚。

第四個是多選欄位的傳遞格式。

這個問題我們在技能檢定專案遇到過。當時我建議用陣列格式傳參數，因為我們前端的多選套件本來就是用陣列，這樣比較直觀。

但是後端工程師覺得用逗號分隔的字串比較方便處理，像是"1,2,3,4"這樣。結果我們前端就要多做一層轉換。

更慘的是，專案進行到後期，後端又希望我們改成陣列格式。你們可以想像我當下的心情嗎？

所以這種格式問題，真的要在一開始就講清楚，不然後期要改就很麻煩了。

第五個是API呼叫方式要統一。

這個聽起來好像很基本，但實際上也常常出問題。比如說，查詢資料的API，有些後端工程師習慣用GET，有些習慣用POST。

還有傳參數的方式，同樣都是POST，有時候要放在Body裡面，有時候要放在Query String。

我們前端在寫API呼叫的時候，就要每個都特別注意，這個要用GET還是POST？參數要怎麼傳？

所以我建議在專案開始就定一個規則，比如說查詢類的都用GET，操作類的都用POST。或者乾脆全部都用POST也可以，重點是要統一。

還有一些其他的細節，像是文字框的字數限制要多少？上傳檔案是要用FormData還是Base64？下載檔案的回傳格式是什麼？這些看起來很小的事情，但如果沒有事先確認，也會造成後續的困擾。

【結語】
總結一下今天跟大家分享的內容，前後端溝通的重點其實不在技術本身，而在於我們要建立共同的認知和標準。

我的建議是，每個專案開始前，都要花點時間坐下來好好討論這些格式問題。雖然一開始可能會覺得有點麻煩，但相信我，這樣做可以幫你們省下很多後續重工的時間。

就像我剛開始說的，前後端在專案初期若沒有先談API格式，就像在沒有地圖的情況下開車，你永遠不知道下一個轉彎會遇到什麼驚喜。

所以我強烈建議大家，下次開新專案的時候，記得先制定一份API規格文件，讓所有團隊成員都能依循相同的標準進行開發。這樣不只是技術上比較順利，整個專案的進度也會更加順暢。

以上就是我今天的分享，謝謝大家的聆聽！